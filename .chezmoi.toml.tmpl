########################################
### PROMPTED PROPERTIES              ###
########################################

{{- $email := "" }}
{{- if (hasKey . "email") }}
{{-   $email = .email }}
{{- else }}
{{-   $email = promptString "E-Mail (git)" }}
{{- end }}

{{- $headless := "" }}
{{- if (hasKey . "environment") }}
{{-   $headless = .headless }}
{{- else }}
{{-   $headless = promptBool "headless" }}
{{- end }}

########################################
### DATA                             ###
########################################

encryption = "age"

[data]
    email = {{ $email | quote }}
    headless = {{ $headless | quote }}

[age]
    identity = {{ joinPath .chezmoi.homeDir ".ssh/.age_public_key.txt" | quote }}
    recipient = {{ (bitwardenFields "item" "ChezMoi Dotfiles Manager").age_private_key.value | quote }}

